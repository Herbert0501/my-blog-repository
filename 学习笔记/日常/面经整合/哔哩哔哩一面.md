### MySQL

#### 为什么用 B+ 树不用二叉树

1. **磁盘 I/O 效率**：B+ 树节点的扇出（一个节点包含的子节点数）较大，树的高度较低，这意味着查找时需要的磁盘 I/O 操作较少。二叉树的高度较高，导致更多的磁盘 I/O 操作。

2. **范围查询效率**：B+ 树的叶子节点形成一个有序链表，范围查询非常高效，可以直接通过链表遍历找到范围内的所有数据。二叉树需要进行中序遍历，效率较低。

3. **空间利用率**：B+ 树的非叶子节点只存储键值信息，叶子节点存储实际数据，这样可以更好地利用内存。而二叉树每个节点都存储数据和指针，空间利用率较低。

#### 平衡二叉树查找时间也是 $O(\log n)$，为什么 B+ 树要比二叉树在 MySQL 的应用上要好

1. **磁盘访问次数**：B+ 树的高度更低，减少了磁盘访问次数。虽然平衡二叉树的查找时间复杂度也是 $O(\log n)$，但由于 B+ 树的扇出更大，实际的树高度更低。

2. **范围查询效率**：B+ 树的叶子节点形成链表，范围查询非常高效。而平衡二叉树需要进行中序遍历，效率较低。

3. **批量插入和删除的效率**：B+ 树在批量插入和删除时，重平衡操作较少，而平衡二叉树需要频繁进行旋转操作，影响性能。

#### 有没有了解 MVCC

MVCC（Multi-Version Concurrency Control，多版本并发控制）是一种用于数据库管理系统的并发控制方法。它通过保存数据的多个版本来实现读写并发控制，避免了读写锁冲突。MySQL 的 InnoDB 存储引擎使用 MVCC 实现快照隔离和可重复读隔离级别。

- **快照隔离**：读操作不会阻塞写操作，写操作也不会阻塞读操作。
- **可重复读**：在一个事务内，读操作总是读取事务开始时的数据快照，即使其他事务已经提交了对数据的修改。

#### MySQL 的有一个主键用连续递增的一个数字和一个随机数有什么区别

1. **连续递增主键**：
   - 优点：插入有序，页分裂较少，索引树结构稳定。
   - 缺点：容易成为瓶颈，尤其是在高并发插入场景下，可能导致“热点”问题。

2. **随机主键**：
   - 优点：插入位置随机，减少了“热点”问题。
   - 缺点：页分裂较多，索引树结构不稳定，可能导致更多的磁盘 I/O 操作。

#### MySQL 优化，EXPLAIN 字段解释

- **id**：查询的唯一标识符，表示查询中执行顺序。
- **select_type**：查询类型，例如 SIMPLE（简单查询）、PRIMARY（主查询）、UNION（联合查询）等。
- **table**：查询的表。
- **type**：连接类型，表示查询使用的索引类型，如 ALL（全表扫描）、index（索引扫描）、range（范围扫描）等。
- **possible_keys**：查询可能使用的索引。
- **key**：实际使用的索引。
- **key_len**：使用的索引长度。
- **ref**：显示索引的哪一列被使用。
- **rows**：估计需要读取的行数。
- **Extra**：额外信息，如 Using where、Using index 等。

#### 二级索引的子节点存的具体数据是什么

二级索引的子节点存储的是索引键值和对应的主键值（在 InnoDB 中）。通过主键值可以在聚簇索引（主索引）中找到实际的数据行。

### Redis

#### Redis 能不能同时执行多条命令（问单线程的点）

Redis 是单线程模型，不能同时执行多条命令。但是，Redis 的单线程模型通过事件循环和非阻塞 I/O 操作实现了非常高的吞吐量。在 Redis 6.0 之后，引入了多线程 I/O 模型，可以并行处理网络请求，但命令执行仍然是单线程的。

#### Unlink 和 delete 区别

- **DELETE**：立即删除键值对，可能会阻塞服务器，尤其是删除大对象时。
- **UNLINK**：异步删除键值对，将删除操作放到后台线程执行，不会阻塞主线程。

#### 从节点复制主节点的流程

1. **建立连接**：从节点与主节点建立连接。
2. **发送同步命令**：从节点发送 PSYNC 命令请求同步数据。
3. **全量同步**：主节点生成 RDB 快照并发送给从节点，从节点加载 RDB 文件。
4. **增量同步**：主节点将从全量同步后产生的写操作日志发送给从节点，从节点应用这些日志。

#### 混合持久化

Redis 4.0 引入了一种新的持久化方式，结合了 RDB 和 AOF 的优点。混合持久化在保存快照时，会先生成 RDB 文件，然后将 AOF 日志追加到 RDB 文件末尾。这种方式既能保证恢复速度，又能减少数据丢失。

#### 有用过其他中间件吗比如消息队列

是的，常见的消息队列中间件包括：

- **RabbitMQ**：基于 AMQP 协议，功能强大，支持复杂的路由和消息确认机制。
- **Kafka**：高吞吐量，适用于大数据实时处理，常用于日志收集和流处理。
- **RocketMQ**：阿里巴巴开源的分布式消息中间件，支持事务消息和顺序消息。
- **ActiveMQ**：Apache 基金会的消息中间件，支持多种协议，功能丰富。